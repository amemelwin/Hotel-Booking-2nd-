<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<script th:fragment="jquery">
	$(document).ready(function(){
		//th:room-id="*{id}" th:lend-flag="*{lendFlag}" th:room-number="*{roomNumber}"
		$(".room").click(function(){
			const attr = selector($(this));
			const roomId = attr("room-id");
			const lendFlag = attr("lend-flag");
			const roomNumber = attr("room-number");
			
			if(lendFlag == 0){
				const inputElement = selector($("input[name='roomId']"));
				const oldSelectedId = inputElement().val();
				let childDiv = selector($(`div[room-id=${roomId}] > div`));
				
				// Has old selected
				if(oldSelectedId){
					// Toggle 
					if(oldSelectedId == roomId){
						childDiv("css","background-color","white");
						inputElement().val("");
					}else{
						// Release selected old room
						let oldRoomElement = selector($(`div[room-id=${oldSelectedId}] > div`));
						oldRoomElement("css","background-color","white");
						
						// Select New Room
						childDiv("css","background-color","#09E745");
						inputElement().val(roomId);
						
					}
					
				}else{
					childDiv("css","background-color","#09E745");
					inputElement().val(roomId);
				}
				
			}
			
			
		});				
		
	});
</script> 	
</html>